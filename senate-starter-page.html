<!DOCTYPE html>
<html lang="en">

<head>
  <!--EXPLANATION -->
  <!--All of the following code is copied from (*https://www.w3schools.com/bootstrap/bootstrap_get_started.asp*) to style my HTML-Page -->

  <!--The paste starts here -->
  <meta charset="utf-8">

  <!--This to make my Page be responsive to any device-->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!--And ends here -->

  <!-- (1) This is a link to Google-Fonts that provides me with style for *font-family* that I am going to use in my CSS file -->
  <!-- <link href="https://fonts.googleapis.com/css?family=Rationale" rel="stylesheet"> -->
  <link href="https://fonts.googleapis.com/css?family=Fjalla+One|Rationale" rel="stylesheet">

  <link rel="stylesheet" href="senate-starter-page.css">
</head>

<body>
  <header>
    <div class="logo">
      <img src="logo.png" alt="TGIF Logo" width="100px">
    </div>
    <div class="e-mail">
      <img src="e-mail-icon.svg" alt="E-mail Icon" width="40px">
      <a href="mailto:info@tgif.net?subject=To%20TGIF%20Team&body=Hello!%0AI%20would%20like%20%20to%20ask:">info@tgif.net</a>
    </div>
  </header>

  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <ul class="nav navbar-nav">
        <li class="active"><a href="home-starter-page.html">Home</a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Congress 113
              <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="senate-starter-page.html">Senate</a></li>
            <li><a href="house-starter-page-jquery.html">House</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <!--Table container-->
  <h2>Senators</h2>
  <p>
    First convened in 1789, the composition and powers of the Senate are established in Article One of the U.S. Constitution. Each state is represented by two senators, regardless of population, who serve staggered six-year terms. The Senate has several exclusive
    powers not granted to the House, including consenting to treaties as a precondition to their ratification and consenting to or confirming appointments of Cabinet secretaries, federal judges, other federal executive officials, military officers, regulatory
    officials, ambassadors, and other federal uniformed officers, as well as trial of federal officials impeached by the House.
  </p>

  <!-- Here is the Fieldset being created -->
  <fieldset>
    <div>
      <!-- Here are the Checkboxes being created -->
      <div class="checkboxes checkbox1">
        <label class="checkbox-title">Filter By Party: </label>
        <input type="checkbox" value="R">
        <label for="foo_bar">Republican</label>
        <input type="checkbox" value="D">
        <label for="foo_baz">Democrat</label>
        <input type="checkbox" value="I">
        <label for="foo_baz">Independent</label>
      </div>
      <!-- Here is the Select being created -->
      <div class="checkboxes checkbox2">
        <label class="checkbox-title">Filter By State: </label>
        <input type="checkbox" name="foo" value="bar" id="foo_bar">
        <label for="foo_bar">Party</label>
      </div>
    </div>
  </fieldset>

  <!-- Here I put the class with the name "table table-hover", to import the attributes of my linked script that I put in the head-->
  <table class="table table-hover table-bordered">
    <thead>
      <tr>
        <th>Members</th>
        <th>Full Name</th>
        <th>Party</th>
        <th>State</th>
        <th>Seniority</th>
        <th>Vote Percentage</th>
      </tr>
    </thead>
    <tbody id="senate-data"></tbody>
  </table>

  <footer class="container-fluid navbar navbar-inverse footer-size">
    <p>@2016 TGIF | All Rights Reserved</p>
  </footer>
</body>

<script src="congress-113-senate.js"></script>
<script>
  // (i)
  // TABLE CREATION********************************************************************************************************************

  // First of all, I need to access the Object of my JS-file, this is why I used 'data'
  // Then I have to access the 'results'-array's first and only element
  // Lastly I write 'members' to access the specific object of my array that gives me the information that I want
  var members = data.results[0].members;
  var tbody = '';

  // (ii)
  //  NEW ARRAY OF MEMBERS CREATION********************************************************************************************************************

  // console.log(data);
  // console.log(members);
  for (var i = 0; i < members.length; i++) {

    // I used this *var tr = ''* to inform the computer about this empty string
    //  so that in the future it's going to contain the data of the table that I wanted to create
    var member = members[i];

    // Here an *addClass* element is required to give a class to some specific elements later
    var tr = '<tr>';
    $(tr).addClass(member.party)
      .addClass(member.state)
      .data("party", member.party)
      .data('state', member.state);

    // I create this variable to make my code look more tidy and clean
    var name = member.first_name + ' ' + (member.middle_name || "") + ' ' + member.last_name;

    // I create a table-row in the HTML <>, because in the end I use the *innerHTML*
    // Which turns our HTML tags inside the stbodyings into actual code
    // I use the *+=* to add at the same time ALL of my data that I would like to make appear in my page
    // tr += '<tr>';

    // Here I create a table-data element using the same tags for the EXACT same reason as above
    // But it is going to be INSIDE of the TR
    // This TD is going to show on my web-page the Number of the member
    // But because the counting always starts from *0*, I add always *1* to get the actual number of the member
    tr += '<td>' + (i + 1) + '</td>';

    // Also, inside the TD tag I add the data that I need to see inside my TD
    tr += '<td>';

    // Here I use the *''* to keep the *member.url* extracted from the *<a>* element
    // Because othewise it is going to appear as JS and it won't be properly loaded
    tr += '<a href = "' + member.url + '" target = _blank>' + name + '</a>';
    tr += '</td>';
    tr += '<td>' + member.party + '</td>';
    tr += '<td>' + member.state + '</td>';
    tr += '<td>' + member.seniority + '</td>';
    tr += '<td>' + member.votes_with_party_pct + ' %' + '</td>';

    tr += '</tr>'
    tbody += tr;
    $('tbody').hide();
  }

  // Here is needed to import the data from JS to the HTML and also using HTML Element-Tags INSIDE the JS
  // The 1st way of doing that is this:
  document.getElementById("senate-data").innerHTML = tbody;
  // And the 2nd way is by using jQuery like this:
  // $('#senate-data').html(tbody);


  // (iii)
  // CHANGES OF CHECKBOXES CREATION***********************************************************************************************************


  // For the function's creation there is this code:
  // function onCheckboxChanged(event) { ... }
  // OR this syntax:
  var onCheckboxChanged = function(event) {

    // Here the checkbox's event is defined
    var checkbox = $(event.currentTarget);

    // Now it is assigned the property 'checked' when clicked
    var isChecked = checkbox.prop('checked');
    console.log(checkbox.val(), isChecked);

    // And here is the actual result!!
    // It is wished, so that WHEN it is checked, to be shown
    if (isChecked == true) {
      $("tbody tr." + checkbox.val()).fadeIn(500);
    }
    // And when not, not to be shown
    else {
      $("tbody tr." + checkbox.val()).fadeOut(300);
    }
  }

  $('.checkboxes input').change(onCheckboxChanged);


  // (iv)
  // SELECT CREATION********************************************************************************************************************

  // Now the *SELECT* is being created
  var select = $('<select />');

  // And here the 1st 'option' of the *SELECT* is taking place
  // This is like a title, to make the website look more organised
  var firstOption = $('<option />').text('--State--');
  // And here is the 'option' appended to the 'select'
  select.append(firstOption);

  // Creation of an empty array is needed
  var states = [];

  // The loop is created in order to fill the empty array with the name of the 'States'
  for (var i = 0; i < members.length; i++) {

    // This is happening for every member
    var member = members[i];

    // EXPLANATION
    //  And now it is checked in the 'states' if the *indexOf* the 'member.state' is equal to -1
    // ' == -1'  means that it actually doesn't exist
    // And this is helpful, because what is needed here is to create a list with UNIQUE options
    // So, for every 'state-value', the *if* checks if it is part of our array
    // If it is NOT, it has a value of -1, because the text editor wasn't able to find it)
    if (states.indexOf(member.state) == -1) {
      // So it has to put this value in the 'states' array
      states.push(member.state);
    }
    // Since there is no 'else', it means that when the value is already there, text-editor does nothing
  }

  // Here the new given array is alphabetically sorted
  states.sort();

  // And now for the new array's length
  for (var i = 0; i < states.length; i++) {

    // An *option* is created with the *text* of the 'state[i]' and also a *value* of the 'state[i]'
    var option = $('<option>').text(states[i]).val(states[i]);

    // Afterwards it is appended to the *select* that was created before
    select.append(option);
  }

  // And here it is returned to be shown to the HTML
  $('.select-options').append(select);
</script>

</html>
